{"version":3,"sources":["Assessment.js","App.js","serviceWorker.js","index.js"],"names":["Option","Select","Assessment","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleChange","value","loadSkillData","loadClassData","handleSkillChange","setState","skillId","loadData","axios","method","url","concat","then","res","console","log","data","list","map","item","index","objectSpread","key","id","skillList","classList","loadRankData","state","handleClassChange","handleOnVideoClick","text","visible","src","handleOk","e","handleCancel","lessonList","periodList","_this2","columns","title","dataIndex","render","react_default","a","createElement","record","cls_cn","es_button","onClick","bind","created_at","es_select","defaultValue","onChange","length","grade_cn","name","table","className","dataSource","modal","closable","onOk","onCancel","destroyOnClose","width","height","controls","type","Component","App","loadLessData","loadPeriodData","loadPeriodRankData","handlePeriodChange","handleRankChange","loading","App_Option","src_Assessment","Boolean","window","location","hostname","match","ReactDOM","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1f0edfed.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios'\nimport { Table, Select, Spin, Button, Modal } from 'antd';\nimport './App.css';\n\n\n\nconst Option = Select.Option\n\n\nclass Assessment extends Component {\n\n constructor() {\n    super()\n    this.state = {\n     data: [],\n     skillList: [],\n     classList: [],\n     lessonList: [],\n     periodList: [],\n     skillId: '',\n     visible: false,\n     src: ''\n    }\n   }\n  \nhandleChange = (value) => {\n    value === '学校' && this.loadSkillData()\n    value === '班级' && this.loadClassData()\n}\n\nhandleSkillChange = (value) => {\n    this.setState({ skillId: value })\n    this.loadData(value)\n}\n// 请求全校排行榜\nloadData = (value) => {\n    axios({\n     method: 'get',\n     url: `/kt-school/api/v5/schools/11/skills/${value}/assessment_rank?app_key=c196b0fe9794&limit=0`\n    }).then((res) => {\n     console.log(res.data)\n     let list = res.data.data.map((item, index) => {\n       return {\n        ...item,\n        key: index + 1\n       }\n     })\n     this.setState({\n      data: list\n     })\n    })\n}\n\nloadSkillData = () => {\n    axios({\n        method: 'get',\n        url: '/kt-school/api/v6/assessments/schools/11/skills?app_key=c196b0fe9794&limit=0'\n       }).then((res) => {\n           this.setState({skillId: res.data.data[0].id})\n        this.loadData(res.data.data[0].id)\n        let skillList = res.data.data.map((item, index) => {\n          return {\n           ...item,\n           key: index\n          }\n        })\n        this.setState({ skillList })\n       })\n}\n// 请求班级\nloadClassData = () => {\n    axios({\n     method: 'get',\n     url: '/kt-school/api/v5/schools/11/classrooms?app_key=c196b0fe9794&limit=0'\n    }).then((res) => {\n     let classList = res.data.data.map((item, index) => {\n      return {\n       ...item,\n       key: index\n      }\n     })\n     this.setState({ classList })\n    })\n   }\n// 请求班级测评\nloadRankData = (value) => {\n    axios({\n        method: 'get',\n        url: `/kt-school/api/v5/classrooms/${value}/skills/${this.state.skillId}/assessment_rank?app_key=c196b0fe9794&limit=0`\n       }).then((res) => {\n        let list = res.data.data.map((item, index) => {\n         return {\n          ...item,\n          key: index\n         }\n        })\n        this.setState({ data: list })\n       })\n}\n   handleClassChange = (value) => {\n       this.loadRankData(value)\n   }\n\ncomponentDidMount() {\n    this.loadSkillData()\n}\n\nhandleOnVideoClick = (text) => {\n    this.setState({\n        visible: true,\n        src: text\n    })\n    console.log(text + '')\n}\n\nhandleOk = (e) => {\n    console.log(e);\n    this.setState({\n      visible: false,\n    });\n  }\n\n  handleCancel = (e) => {\n    console.log(e);\n    this.setState({\n      visible: false,\n    });\n  }\n\n\n   render() {\n    const columns = [{\n        title: '序号',\n        dataIndex: 'key',\n       key: 'key',\n      },{\n        title: '头像',\n        dataIndex: 'avatar',\n       key: 'avatar',\n       render: text => < img id='img' src={text} />\n      }, {\n        title: '姓名',\n        dataIndex: 'realname',\n        key: 'realname',\n      }, {\n        title: '班级',\n        dataIndex: 'grade_cn',\n        key: 'grade_cn',\n        render: (text, record) => (\n            <span>{`${text}${record.cls_cn}`}</span>\n          )\n      }, {\n        title: '完成数量',\n        dataIndex: 'count',\n        key: 'count',\n      }, {\n        title: '评级',\n        dataIndex: 'rank',\n        key: 'rank',\n      }, {\n        title: '评级视频',\n        dataIndex: 'video',\n        key: 'video',\n          render: (text, record) => (\n              <span>\n                  <Button onClick={this.handleOnVideoClick.bind(this, text)}>{record.created_at}</Button>\n              </span>\n          )\n      }];\n    return (\n     <div>\n      <Select defaultValue='学校' onChange={this.handleChange}>\n       <Option value='学校'>学校</Option>\n       <Option value='班级'>班级</Option>\n      </Select>\n\n      {\n        this.state.classList.length > 0 ? \n        <Select defaultValue={`${this.state.classList[0].grade_cn} ${this.state.classList[0].cls_cn}`} onChange={this.handleClassChange}>\n        {\n        this.state.classList.map((item, index) => <Option value={item.id} key={item.id}>{`${item.grade_cn} ${item.cls_cn}`}</Option>)\n        }\n        </Select> : <div></div>\n    }\n\n      {\n       this.state.skillList.length > 0 ? \n        <Select defaultValue={this.state.skillList[0].name} onChange={this.handleSkillChange}>\n         {\n          this.state.skillList.map((item, index) => <Option value={item.id} key={item.id}>{item.name}</Option>)\n         }\n        </Select> : <div></div>\n      }\n\n      <Table className='table' columns={columns} dataSource={this.state.data} />\n      <Modal visible={this.state.visible} closable={false} onOk={this.handleOk}\n          onCancel={this.handleCancel} destroyOnClose={true}>\n        <video width='100%' height='100%' controls>\n            <source src={this.state.src} type='video/mp4' />\n        </video>\n      </Modal>\n     </div>\n    )\n   }\n}\n\nexport default Assessment;","import React, { Component } from 'react';\nimport axios from 'axios'\nimport { Table, Select, Spin } from 'antd';\nimport './App.css';\nimport Assessment from './Assessment';\n\nconst columns = [{\n  title: '序号',\n  dataIndex: 'key',\n  key: 'key',\n},{\n  title: '头像',\n  dataIndex: 'avatar',\n key: 'avatar',\n render: text => < img id='img' src={text} />\n}, {\n  title: '姓名',\n  dataIndex: 'realname',\n  key: 'realname',\n}, {\n  title: '班级',\n  dataIndex: 'grade_cn',\n  key: 'grade_cn',\n  render: (text, record) => (\n    <span>{`${text}${record.cls_cn}`}</span>\n  )\n}, {\n  title: '黄(态度)',\n  dataIndex: 'attitude_level',\n  key: 'attitude_level',\n}, {\n  title: '黑(技术)',\n  dataIndex: 'technology_level',\n  key: 'technology_level',\n}, {\n  title: '红(身体)',\n  dataIndex: 'body_level',\n  key: 'body_level',\n}, {\n  title: '蓝(意识)',\n  dataIndex: 'mentality_level',\n  key: 'mentality_level',\n}, {\n  title: '总',\n  dataIndex: 'total_level',\n  key: 'total_level',\n}];\n\nconst Option = Select.Option\n\nclass App extends Component {\n\n constructor() {\n  super()\n  this.state = {\n   data: [],\n   classList: [],\n   lessonList: [],\n   periodList: [],\n   loading: true\n  }\n }\n\n componentDidMount() {\n  this.loadData()\n }\n\n// 请求全校排行榜\n loadData = () => {\n  axios({\n   method: 'get',\n   url: '/kt-school/api/v5/schools/181/performance_rank?app_key=c196b0fe9794&limit=0'\n  }).then((res) => {\n   console.log(res.data)\n   let list = res.data.data.map((item, index) => {\n     return {\n      ...item,\n      key: index + 1\n     }\n   })\n   this.setState({\n    data: list\n   })\n  })\n }\n\n// 请求班级\n loadClassData = () => {\n  axios({\n   method: 'get',\n   url: '/kt-school/api/v5/schools/181/classrooms?app_key=c196b0fe9794&limit=0'\n  }).then((res) => {\n   let classList = res.data.data.map((item, index) => {\n    return {\n     ...item,\n     key: index\n    }\n   })\n   this.setState({ classList })\n  })\n }\n\n // 请求课程\n loadLessData = (value) => {\n  axios({\n   method: 'get',\n   url: `/kt-school/api/v5/classrooms/${value}/lessons?app_key=c196b0fe9794&limit=0`\n  }).then((res) => {\n    this.loadPeriodData(res.data.data[0].id)\n    let lessonList = res.data.data.map((item, index) => {\n    return {\n     ...item,\n     key: index\n    }\n   })\n   this.setState({ lessonList })\n  })\n }\n\n // 请求课时\n loadPeriodData = (value) => {\n  axios({\n    method: 'get',\n    url: `/kt-school/api/v5/lessons/${value}/lesson_periods?app_key=c196b0fe9794&limit=0`\n   }).then((res) => {\n    let periodList = res.data.data.map((item, index) => {\n     return {\n      ...item,\n      key: index\n     }\n    })\n    this.setState({ periodList })\n   })\n }\n // 请求课时排行榜\n loadPeriodRankData = (value) => {\n  axios({\n    method: 'get',\n    url: `/kt-school/api/v5/lesson_periods/${value}/performance_rank?app_key=c196b0fe9794&limit=0`\n   }).then((res) => {\n    let list = res.data.data.map((item, index) => {\n     return {\n      ...item,\n      key: index\n     }\n    })\n    this.setState({ data: list })\n   })\n }\n\n handleClassChange = (value) => {\n  this.loadLessData(value)\n }\n\n\n handlePeriodChange = (value) => {\n  this.loadPeriodData(value)\n }\n\n handleRankChange = (value) => {\n   this.setState({ loading: true });\n   this.loadPeriodRankData(value)\n } \n\n handleChange = (value) => {\n  value === '学校' && this.loadData()\n  value === '班级' && this.loadClassData()\n }\n\n render() {\n  return (\n   <div>\n    <Select defaultValue='学校' onChange={this.handleChange}>\n     <Option value='学校'>学校</Option>\n     <Option value='班级'>班级</Option>\n    </Select>\n    {\n     this.state.classList.length > 0 ? \n      <Select defaultValue={`${this.state.classList[0].grade_cn} ${this.state.classList[0].cls_cn}`} onChange={this.handleClassChange}>\n       {\n        this.state.classList.map((item, index) => <Option value={item.id} key={item.id}>{`${item.grade_cn} ${item.cls_cn}`}</Option>)\n       }\n      </Select> : <div></div>\n    }\n\n\n    {\n     this.state.lessonList.length > 0 ? \n      <Select defaultValue={this.state.lessonList[0].name} onChange={this.handlePeriodChange}>\n       {\n        this.state.lessonList.map((item, index) => <Option value={item.id} key={item.id}>{item.name}</Option>)\n       }\n      </Select> : <div></div>\n    }\n\n    {\n     this.state.periodList.length > 0 ? \n      <Select defaultValue={this.state.periodList[0].name} onChange={this.handleRankChange}>\n       {\n        this.state.periodList.map((item, index) => <Option value={item.id} key={item.id}>{item.name}</Option>)\n       }\n      </Select> : <div></div>\n    }\n\n    <Table className='table' columns={columns} dataSource={this.state.data} />\n    {/* <Spin spinning={this.state.loading}></Spin> */}\n\n    <Assessment />>\n\n   </div>\n  )\n }\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'antd/dist/antd.css';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}